<div class="kanban-card {{ task.status }}" draggable="true" ondragstart="drag(event)" id="task-{{ task.id }}">
    <h5>{{ task.name }}</h5>
    <p title="{{ task.description }}">{{ task.description|truncatechars:50 }}</p>

    <div class="task-tags">
        {% for tag in task.tags.all %}
        <div class="task-tag" data-color="{{ tag.color }}" style="display: inline-block; width: auto; padding: 3px 8px; border-radius: 6px; margin-right: 5px; font-weight: bold; color: white; white-space: nowrap;">
                <span>{{ tag.name }}</span>
            </div>
        {% endfor %}
    </div>

    <div class="card-footer">
        <div class="icon-container">
            <a href="{% url 'edit_task' task.id %}" title="Edit Task">
                <i class="fa-solid fa-pen-to-square"></i>
            </a>
            <a href="#" title="Duplicate Task" onclick="duplicateTask('{{ task.id }}')">
                <i class="fa-solid fa-copy"></i>
            </a>
            <a href="#" title="Delete Task" onclick="deleteTask('{{ task.id }}')">
                <i class="fa-solid fa-trash"></i>
            </a>
        </div>
        <div class="due-date">
            <i class="fa-regular fa-clock"></i> {{ task.date_to_complete|date:"d M" }}
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".task-tag").forEach(function(tag) {
            let color = tag.getAttribute("data-color");
            if (color) {
                tag.style.backgroundColor = color;
            }
        });
    });
</script>